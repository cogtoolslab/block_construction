---
title: "build_components"
author: "Will McCarthy"
date: "2022-11-28"
output: html_document
---

```{r}
library(tidyverse)
library(lme4)
# library(lmerTest)
library(ggthemes)
library(performance) 
library(see)
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Import data

```{r import}
df.recall <- read_csv('../../results/build_components/csv/df_recall_build_components_pilot_2.csv')

df.recall <- df.recall %>%
  mutate(respond_old = 1*(response_meaning == 'old'))

df.recall

df.dprimes <- read_csv('../../results/build_components/csv/df_condition_measures_build_components_pilot_2.csv')

df.dprimes
```

## Mixed effects linear models

### By ppt

Intercept shows that ppts do recognize towers they have previously experienced.
Slope on condition shows that participants are more likely to recognize viewed towers than built towers.
```{r d.prime.lmers}
m1 <- lm(data = df.dprimes, d_prime ~ condition)
# anova(m1)
summary(m1)
```

### By trial

```{r lmers.tower}
m1 <- glmer(data = df.recall, family = binomial, respond_old ~ novelty + (1 | gameID))
m2 <- glmer(data = df.recall, family = binomial, respond_old ~ novelty + condition + (1 | gameID))
anova(m1, m2)
summary(m2)
```

```{r lmers}
m1 <- glmer(data = df.recall, family = binomial, respond_old ~ novelty + (1 + novelty | gameID) + (1 | tower_id))
# m2 <- glmer(data = df.recall, family = binomial, respond_old ~ novelty + condition + (1 | gameID))
anova(m1, m2)
summary(m2)
```

